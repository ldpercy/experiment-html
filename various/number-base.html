<!doctype html>
<html lang="en">
<head>
	<title>number base</title>
	<meta charset="utf-8">
	<link rel="icon" href="../[common]/favicon.svg">
	<link rel="stylesheet" href="../[common]/common-style.css">
	<script>
		console.clear();
		console.log('experiment-template.html');
		document.addEventListener('DOMContentLoaded', documentDOMContentLoaded);

		function documentDOMContentLoaded() {
			log = createPageLog(document.getElementById('pageLog'));
			log('experiment-template.html: document.DOMContentLoaded');
			run();
		}
	</script>
	<script defer src="../[common]/common-script.js"></script>
	<script>

		function toBase(base, number) {
			//log(arguments);
			let result = {};
			//let ones = number % base;
			//result[1] = ones;
			//let remainder = number - ones;
			let remainder = number;
			let power = 0;
			let position = 1;
			let place = 0;
			while (remainder > 0) {
				//let place = base ** power;
				place = base**power;
				//log(power, place, remainder);
				//let placeVal = Math.floor(remainder/place);
				let placeVal = remainder % base;

				remainder = (remainder - placeVal)/ base;

				//log(placeVal);

				result[place] = placeVal;

				power++;

			}
			return result;
		}

		function run(){
			let base = 4;

			//log(toBase(10,123));

			/* for (i=1;i<=12;i++)
			{
				log(`${base,i}:`,toBase(base,i));
			} */
			document.getElementById('output').innerHTML += getTable(2,31);
			document.getElementById('output').innerHTML += getTable(3,12);

		}


		function baseSize(base, number) {
			power = 0;
			while (base**power <= number) { power++; }
			return power;
		}


		function getTable(base, to) {
			const size =  baseSize(base,to);
			let th = '<th></th>';
			let tr = '';
			let td = '';

			for (let h = size; h >= 0; h--)
			{
				th += `<th>${base**h}</th>`;
			}

			for (let r=1; r<=to; r++ ) {
				td = '';
				let n = toBase(base, r);
				for (let d = size; d >= 0; d--)
				{
					td += `<td>${n[base**d]||'0'}</td>`;
				}
				tr += `
					<tr>
						<th>${r}</th>
						${td}
					</tr>`;
			}

			result = `
				<h3>Base ${base}; to ${to}</h3>
				<table>
				<thead>
				<tr>${th}</tr>
				<thead>
				<tbody>
					${tr}
				</tbody>
				</table>
			`;
			return result;
		}


	</script>
</head>
<body>
	<nav><a title="Up to folder" href="./">./</a> <a title="Parent folder" href="../">../</a></nav>

	<h1><a href="">number base</a></h1>

	<output id="output">


	</output>


	<h2>Log:</h2>
	<output id="pageLog"></output>
</body>
</html>