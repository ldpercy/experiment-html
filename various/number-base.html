<!doctype html>
<html lang="en">
<head>
	<title>number base</title>
	<meta charset="utf-8">
	<link rel="icon" href="../[common]/html-experiment.svg">
	<link rel="stylesheet" href="../[common]/common-style.css">
	<script>
		console.clear();
		console.log('experiment-template.html');
		document.addEventListener('DOMContentLoaded', documentDOMContentLoaded);

		function documentDOMContentLoaded() {
			log = createPageLog(document.getElementById('pageLog'));
			log('experiment-template.html: document.DOMContentLoaded');
			run();
		}
	</script>
	<script defer src="../[common]/common-script.js"></script>

</head>
<body>
	<header>
		<h1><a href="">number base</a></h1>
		<nav>
			<a class="colourScheme-selector" href="?colourScheme=light" title="Light colour scheme" data-colourscheme="light">ðŸŸ“</a>
			<a class="colourScheme-selector" href="?colourScheme=dark" title="Dark colour scheme" data-colourscheme="dark">ðŸŸ’</a>
			<a title="To folder" href="./">ðŸ–¿</a>
			<a title="Parent folder" href="../">ðŸ¡…</a>
		</nav>

	</header>

	<main>
	<script>

		function toBase(base, number) {
			let result = {};
			let remainder = number;
			let power = 0;
			let placeKey = 0;
			let placeVal = 0;
			while (remainder > 0) {
				placeKey = base**power;
				placeVal = remainder % base;
				result[placeKey] = placeVal;
				remainder = (remainder - placeVal)/ base;
				power++;
			}
			return result;
		}

		function run(){
			let base = 4;

			//log(toBase(10,123));

			/* for (i=1;i<=12;i++)
			{
				log(`${base,i}:`,toBase(base,i));
			} */
			document.getElementById('output').innerHTML += getTable(2,31);
			document.getElementById('output').innerHTML += getTable(3,12);

		}


		function baseSize(base, number) {
			power = 0;
			while (base**power <= number) { power++; }
			return power;
		}


		function getTable(base, to) {
			const size =  baseSize(base,to);
			let th = '<th></th>';
			let tr = '';
			let td = '';

			for (let h = size; h >= 0; h--)
			{
				th += `<th>${base**h}</th>`;
			}

			for (let row=1; row <= to; row++ ) {
				td = '';
				let number = toBase(base, row);

				for (let d = size; d >= 0; d--)
				{
					td += `<td>${number[base**d]||'0'}</td>`;
				}
				tr += `
					<tr>
						<th>${row}</th>
						${td}
					</tr>`;
			}

			result = `
				<h3>Base ${base}; to ${to}</h3>
				<table>
				<thead>
				<tr>${th}</tr>
				<thead>
				<tbody>
					${tr}
				</tbody>
				</table>
			`;
			return result;
		}


	</script>
	<output id="output">


	</output>

	</main>
	<h2>Log:</h2>
	<output id="pageLog"></output>
</body>
</html>