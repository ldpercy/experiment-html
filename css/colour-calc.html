<!doctype html>
<html lang="en">
<head>
	<title>colour-calc</title>
	<meta charset="utf-8">
	<link rel="icon" href="../[html-common]/favicon/css.svg">
	<link rel="stylesheet" href="../[common]/common-style.css">
	<link rel="stylesheet" href="../[common]/transition.css">
	<link rel="stylesheet" href="../[common]/background.css">
	<script defer src="../[common]/colourScheme-selector.js"></script>
</head>
<body onload="generateSwatches();">
	<header>
		<h1><a href="">Colour calc</a></h1>
		<nav>
			<a class="colourScheme-selector" href="?colourScheme=light" title="Light colour scheme" data-colourScheme="light">ðŸŸ“</a>
			<a class="colourScheme-selector" href="?colourScheme=dark" title="Dark colour scheme" data-colourScheme="dark">ðŸŸ’</a>
			<a title="To folder" href="./">ðŸ–¿</a>
			<a title="Parent folder" href="../">ðŸ¡…</a>
		</nav>
	</header>

	<main>

		<style contenteditable="plaintext-only" >

			label { display:block; }
			output table {
				font-family:monospace;
				width: 100%;
				th { padding:2em; }
				thead th { font-weight:bold; }
				tbody th {
					background-color: var(--row-colour);
				}
				td { text-align: center; }
			}
		</style>


		<form onchange="generateSwatches();">
			<h2>Settings</h2>

			<label for="input-colour">
				Colour inputs
			</label>
			<textarea id="input-colour" spellcheck="false">
				black
				white
				#663399
				#f7df1e
				mediumvioletred
				orangered
				#ffb13b
				dodgerblue
				plum
				springgreen
				aqua
				oldlace
				floralwhite
				beige
			</textarea>

			<!--
				black
				white
				#663399
				#f7df1e
				mediumvioletred
				orangered
				#ffb13b
				dodgerblue
				plum
				springgreen
				aqua
				oldlace
				floralwhite
				beige
			-->

			<label for="input-calculation">
				Calculations
			</label>
			<textarea id="input-calculation" spellcheck="false">
				hsl		h s 50 / 0.5
				hsl		h s 60 / 0.4
				hsl		h s 65 / 0.35
				hsl		h s 66 / 0.33
				hsl		h s 70 / 0.3
				hsl		h s 80 / 0.2
			</textarea>
			<br/>
			<button type="button" onclick="generateSwatches()">generate swatches</button>
		</form>


		<output class="fullwidth">
			<h3>Calculation results</h3>
			<table class="swatches ">
			<thead id="result-thead">
			</thead>
			<tbody id="result-tbody" class="background-crosshatch">
			</tbody>
			</table>


		</output>

		<pre>
			Somewhere around:

				hsl(from $colour h s 70 / 0.30)
				hsl(from $colour h s 66 / 0.33)

			you get pretty reliable transparent backgrounds from just about any colour input (66/33 is more memorable though).
			Though imo these are still a bit too opaque in dark mode, and don't really carry through the lightness flavour of the original.
			Will need some more tweaking.

			Lightness Inversion:
			hsl		h s calc(100 - l)

			Darken:
			hsl		h s calc(l / 2)

			Lighten:
			hsl		h s calc(l + (100 - l) / 2)

		</pre>

		<script class="fullwidth">

			function generateSwatches() {
				let result = '';
				const colourText = document.getElementById('input-colour').value.trim();
				const colourArray = colourText.split('\n').map((element)=>element.trim());
				console.log(colourArray);

				const calculationText = document.getElementById('input-calculation').value.trim();
				const calculationArray = calculationText.split('\n').map(
					(calcLine) => {
						let match = calcLine.match(/\s*(\w+)\s+(.*)/);
						//console.log('match',match);
						let result = {
							model : match[1],
							calc : match[2],
						}
						//return calcLine.trim();
						return result;
					}

				);
				console.log(calculationArray);

				let headerCells = '';
				let trow = '';
				let rowCells = '';
				let tbody = '';
				let colourCalc = '';


				// header
				for (let col=0; col < calculationArray.length; col++) {
					headerCells += `<th>${calculationArray[col].model}(from $colour ${calculationArray[col].calc})</th>`;
				}
				let thead = `
					<tr>
						<th></th>
						${headerCells}
					</tr>
				`;
				document.getElementById('result-thead').innerHTML = thead;


				// body
				for (let row=0; row < colourArray.length; row++) {
					rowCells  = '';

					for (let col=0; col < calculationArray.length; col++) {

						colourCalc = `${calculationArray[col].model}(from ${colourArray[row]} ${calculationArray[col].calc})`;

						rowCells += `<td style="background-color:${colourCalc}">${colourCalc}</td>`;
					}
					trow = `
						<tr style="--row-colour:${colourArray[row]}">
							<th>${colourArray[row]}</th>
							${rowCells}
						</tr>
					`;

					tbody += trow;
				}
				document.getElementById('result-tbody').innerHTML = tbody;
			}

		</script>


	</main>

</body>
</html>