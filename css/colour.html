<!doctype html>
<html lang="en">
<head>
	<title>colour</title>
	<meta charset="utf-8">
	<link rel="icon" href="../[common]/favicon.svg">
	<link rel="stylesheet" href="../[common]/common-style.css">
	<link rel="stylesheet" href="../[common]/transition.css">
	<link rel="stylesheet" href="../[common]/background.css">
	<script defer src="../[common]/colourScheme-selector.js"></script>
	<script src="../[common]/common-script.js"></script>

</head>
<body onload="setRandomColour();">
	<header>
		<nav>
			<a class="colourScheme-selector" href="?colourScheme=light" title="Light colour scheme" data-colourScheme="light">ðŸŸ“</a>
			<a class="colourScheme-selector" href="?colourScheme=dark" title="Dark colour scheme" data-colourScheme="dark">ðŸŸ’</a>
			<a title="To folder" href="./">ðŸ–¿</a>
			<a title="Parent folder" href="../">ðŸ¡…</a>
		</nav>

		<h1><a href="">colour</a></h1>
	</header>

	<main>

		<script class="limit-height">
			function setRandomColour() {
				randomColour = randomColourHex();
				document.getElementById('input-colourText').value = randomColour;
				document.getElementById('input-colourPicker').value = randomColour;
				setColour();
			}

			function setColour() {
				const colour = document.getElementById('input-colourText').value;
				const divisions = document.getElementById('input-divisions').value;

				document.body.style.setProperty('--colour', colour);
				//document.body.style.setProperty('--colour1', colour);

				const hslSwatches =`
					<div>${swatchesHSL(colour, 'h', divisions)}</div>
					<div>${swatchesHSL(colour, 's', divisions)}</div>
					<div>${swatchesHSL(colour, 'l', divisions)}</div>
					<div>${swatchesHSL(colour, 'a', divisions)}</div>
				`;

				document.getElementById('swatchesHSL').innerHTML = hslSwatches;

				const hwbSwatches =`
					<div>${swatchesHWB(colour, 'h', divisions)}</div>
					<div>${swatchesHWB(colour, 'w', divisions)}</div>
					<div>${swatchesHWB(colour, 'b', divisions)}</div>
					<div>${swatchesHWB(colour, 'a', divisions)}</div>
				`;

				document.getElementById('swatchesHWB').innerHTML = hwbSwatches;
			}
		</script>

		<style contenteditable="plaintext-only"  class="limit-height">
			body {
				--colour: var(--project-colour);
				/* --colour1: var(--project-colour); */
				color-scheme: var(--colourScheme);

				--accent-light: hsl(from var(--colour1) h s 70% );
				--accent-dark: hsl(from var(--colour1) h s 40% );

				accent-color: var(--colour);
			}
			output { grid-column-start: span 4; }
			.swatches {
				font-family:monospace;
				div {
					display: flex;
  					justify-content: space-evenly;
				}
				span {
					display:inline-block;
					width: 100%;
					padding:2em;
					border-radius:1ex;
				}

			}
		</style>


		<output>
			<form onchange="setColour();">
				<h2>Colour</h2>
				<label>
					Colour picker
					<input type="color" id="input-colourPicker" value="orangered" onchange="document.getElementById('input-colourText').value=this.value">
				</label>
				<label>
					Colour text
					<input type="text" id="input-colourText" value="orangered" onchange="document.getElementById('input-colourPicker').value=this.value">
				</label>
				<label>
					Channel divisions
					<input type="number" id="input-divisions" min="2" max="12" step="1" value="5">
				</label>

				<label>
					<button type="button" onclick="setRandomColour()">ðŸŽ² random colour</button>
				</label>
			</form>

			<h3>hsl</h3>
			<div class="swatches background-crosshatch" id="swatchesHSL"></div>

			<h3>hwb</h3>
			<div class="swatches background-crosshatch" id="swatchesHWB"></div>
		</output>


		<script>
			/** swatchesHSL
			 * @param {string} colour
			 * @param {string} channel
			 * @param {number} divisions
			 */
			function swatchesHSL(colour, channel, divisions) {
				// channel = hue saturation lightness alpha
				let result = '';

				let max = (channel === 'h') ? 360 : 1;
				switch(channel) {
					case 'h': max = 360; break;
					case 's': max = 100; break;
					case 'l': max = 100; break;
					case 'a': max = 1; break;
				}

				const step = max/divisions;
				let val = 0;
				let h, s, l, a;
				let colourString = '';

				for (i=0; i<=divisions; i++) {
					val = i * step;
					h	= (channel === 'h') ? `calc(h + ${val.toFixed(2)})` : 'h';
					s	= (channel === 's')	? `${val.toFixed(2)}` : 's';
					l	= (channel === 'l')	? `${val.toFixed(2)}` : 'l';
					a	= (channel === 'a')	? `${val.toFixed(3)}` : 'alpha';

					colourString = `hsl(from ${colour} ${h} ${s} ${l} / ${a})`;
					result += `<span style="background-color: ${colourString};">${colourString}</span>`;
				}

				return result;
			}/* swatchesHSL */


			/** swatchesHWB
			 * @param {string} colour
			 * @param {string} channel
			 * @param {number} divisions
			 */
			function swatchesHWB(colour, channel, divisions) {
				// channel = hue whiteness blackness alpha
				let result = '';

				switch(channel) {
					case 'h': max = 360; break;
					case 'w': max = 100; break;
					case 'b': max = 100; break;
					case 'a': max = 1; break;
				}

				const step = max/divisions;
				let val = 0;
				let h, w, b, a;
				let colourString = '';

				for (i=0; i<=divisions; i++) {
					val = i * step;
					h	= (channel === 'h') ? `calc(h + ${val.toFixed(2)})` : 'h';
					w	= (channel === 'w')	? `${val.toFixed(2)}` : 'w';
					b	= (channel === 'b')	? `${val.toFixed(2)}` : 'b';
					a	= (channel === 'a')	? `${val.toFixed(3)}` : 'alpha';

					colourString = `hwb(from ${colour} ${h} ${w} ${b} / ${a})`;
					result += `<span style="background-color: ${colourString};">${colourString}</span>`;
				}

				return result;
			}/* swatchesHSB */

		</script>


	</main>

</body>
</html>