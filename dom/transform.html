<!doctype html>
<html lang="en">
<head>
	<title>transform</title>
	<meta charset="utf-8">
	<link rel="icon" href="../[common]/favicon.svg">
	<link rel="stylesheet" href="../[common]/common-style.css">
	<link rel="stylesheet" href="../[common]/form.css">

</head>
<body>
	<header>
		<nav>
			<a id="button-lightScheme" href="#" title="Light scheme" data-scheme="light">ðŸŸ“</a>
			<a id="button-darkScheme" href="#" title="Dark scheme" data-scheme="dark">ðŸŸ’</a>
			<a title="To folder" href="./">ðŸ–¿</a>
			<a title="Parent folder" href="../">ðŸ¡…</a>
		</nav>

		<h1><a href="">transform</a></h1>
	</header>

	<link rel="stylesheet" href="../[html-common]/style/svg/grid.css"/>

	<style>
		* { transition: all ease-in 0.5s; }
		.display {
			display: grid;
			grid-template-columns: 3fr 1fr;
		}
		svg {
			outline:2px dashed var(--svg-orange);
			margin:1ex;
			border-radius: 1ex;
		}
	</style>

	<script type="module">
		import * as planar from '../[html-common]/module/PlanarSpace.js'
		import * as svg from '../[html-common]/module/SVG.js'

		let space = new planar.Space('simple space');
		let box = new svg.Box(-1200,-600,2400,1200);
		console.log(box);

		const cartesianGrid = new svg.CartesianGrid(space, box);
		const svgGrid = document.getElementById('svgGrid');
		svgGrid.innerHTML = cartesianGrid.toString();

	</script>

	<div class="display">
		<svg id="svgDoc1" viewBox="-1200 -600 2400 1200">
			<g id="svgGrid" class="grid"></g>
		</svg>
		<form name="matrix" onchange="formOnchange()">
			<label><input name="a" type="range" value="1" min="-10" max="10"> a - scaleX</label>
			<label><input name="b" type="range" value="0" min="-10" max="10"> b - skewY</label>
			<label><input name="c" type="range" value="0" min="-10" max="10"> c - skewX</label>
			<label><input name="d" type="range" value="1" min="-10" max="10"> d - scaleY</label>
			<label><input name="e" type="range" value="0" min="-100" max="100"> e - translateX</label>
			<label><input name="f" type="range" value="0" min="-100" max="100"> f - translateY </label>
			<button type="reset" onclick="formReset()">reset</button>
		</form>
	</div>


	<script>
		function formOnchange() {
			//console.log('formOnchange')
			let matrix = new DOMMatrix([
				document.forms.matrix.a.value,
				document.forms.matrix.b.value,
				document.forms.matrix.c.value,
				document.forms.matrix.d.value,
				document.forms.matrix.e.value,
				document.forms.matrix.f.value,
			]);
			console.log(matrix.toString());
			svgGrid.setAttribute('transform', matrix.toString());

		}

		const identity = new DOMMatrixReadOnly([
			1, 0, 0,
			1, 0, 0,
		]);

		function formReset() {
			console.log('formReset');
			svgGrid.setAttribute('transform', identity.toString());
		}

	</script>


</body>
</html>