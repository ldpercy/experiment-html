<!doctype html>
<html lang="en">
<head>
	<title>Testing</title>
	<meta charset="utf-8">
	<link rel="icon" href="../[common]/html-experiment.svg">
	<link rel="stylesheet" href="../[common]/common-style.css">
	<link rel="stylesheet" href="../[common]/form.css">
	<script defer src="../[common]/colourScheme-selector.js"></script>
</head>
<body>
	<header>
		<h1><a href="">Testing</a></h1>
		<nav>
			<a class="colourScheme-selector" href="?colourScheme=light" title="Light colour scheme" data-colourscheme="light">ðŸŸ“</a>
			<a class="colourScheme-selector" href="?colourScheme=dark" title="Dark colour scheme" data-colourscheme="dark">ðŸŸ’</a>
			<a title="To folder" href="./">ðŸ–¿</a>
			<a title="Parent folder" href="../">ðŸ¡…</a>
		</nav>
	</header>

	<main>
		<script type="module" class="fullwidth">
			import * as test from './testing.js';
			import * as predicate from './predicate.js';


			console.info('t0: null test');
			let t0 = new test.Test(
				'null test'
			);
			console.log(t0);
			console.log(t0.run());
			console.log(t0.pass);			// Empty tests pass:	https://en.wikipedia.org/wiki/Vacuous_truth#In_computer_programming



			console.info('t1: all equal');
			let t1 = new test.Test(
				'AllEqual',
				new predicate.AllEqual(),
				[
					[],
					[1],
					[true],
					[false],
					[1,2],
					[1,2-1,1*1],
					[null,false],
					[1,2,3],
					[1,1,1,1],
					[typeof (()=>{}), 'function']
				]
			);
			console.log(t1.run());
			console.log(t1.pass);




			test.groupTest(
				'Equal To',
				new predicate.EqualTo(5),
				[
					[0],
					[1],
					[5],
					[6],
					[true],
					[false],
				]
			);


			test.groupTest(
				'GreaterThan',
				new predicate.GreaterThan(5),
				[
					[0],
					[1],
					[5],
					[6],
					[true],
					[false],
				]
			);

			test.groupTest(
				'LessThan',
				new predicate.LessThan(5),
				[
					[0],
					[1],
					[5],
					[6],
					[true],
					[false],
				]
			);


			test.groupTest(
				'Excepts',
				new predicate.Excepts(),
				[
					1+2,
					1/0,
					()=>{ return 1+1; },
					()=>{ throw 'an exception'; },
					throwsException,
					//throwsException(),		// can't do this - it excepts immediately and isn't caught by the testing function
					()=>throwsException(),
					f1,
					() => f1,
					() => f1(),
					() => f1({}),
					//f1(),						// can't do this - it excepts immediately and isn't caught by the testing function
				]
			);

		</script>


		<script>
			// helpers

			function throwsException() {
				throw 'this is an exception';
			}

			function f1({a,b,c}) {
				// console.log(`f1(${argString(arguments)}): ${a},${b},${c}`);
				return `f1(${argString(arguments)}): ${a},${b},${c}`;
			}

			//f1();
			// 	[chr] Uncaught TypeError: Cannot destructure property 'a' of 'undefined' as it is undefined.
			//	[ff] Uncaught TypeError: (destructured parameter) is undefined

			/*
			try {
				f1();
			}
			catch(exception){
				console.log(exception);  // this exception appears at the top of the console stack
			}
			*/

		</script>



		<!--
		<script type="module" class="fullwidth">
			import * as ps from '../[html-common]/module/PlanarSpace.js'


			console.group('default planar space');
				let dps = new ps.Space('default planar space', ps.defaultSpaceSettings);
				console.log('dps', dps);

				let p1 = dps.newPoint('p1');
				p1.setCartesian(100,100);

				console.info(dps.newPoint('').setCartesian(100,100));


				//console.log('p1', p1);
				//console.log('p1.angle', p1.angle);
				//console.log('p1.radius', p1.radius);
				p1.setCartesian(100,100);
				console.assert((p1.angle.degrees === 45), 'Angle not equal to 45');
				p1.setCartesian(-100,100);
				console.assert((p1.angle.degrees === -45), 'Angle not equal to -45');
				p1.setCartesian(100,-100);
				console.assert((p1.angle.degrees === 135), 'Angle not equal to 45');
				p1.setCartesian(-100,-100);
				console.assert((p1.angle.degrees === -135), 'Angle not equal to -45');

				test.testArray(
					predicate.allEqual,
					[
						[(new Point( 100, 100)).degrees, 45],
						[(new Point( 100,-100)).degrees, 135],
						[(new Point(-100, 100)).degrees, -45],
						[(new Point(-100,-100)).degrees, -135],
					]
				);


			console.groupEnd();


			console.group('configured planar space');
				let setting = {polarAxis:'x', polarDirection: 'anticlockwise'};
				let cps = new ps.Space('configured planar space', setting);
				console.log('cps', cps);

				let p2 = cps.newPoint('p2');
				p2.setCartesian(15,20);
				console.log('p2', p2);
				console.log('p2.angle', p2.angle);
				console.log('p2.radius', p2.radius);

				p1.setCartesian(100,100);
				console.assert((p1.angle.degrees === 45), `Angle not equal to 45: ${p1.angle.degrees}`);

				p1.setCartesian(-100,100);
				console.assert((p1.angle.degrees === 135), `Angle not equal to 135: ${p1.angle.degrees}`);

				p1.setCartesian(100,-100);
				console.assert((p1.angle.degrees === -45), `Angle not equal to -45: ${p1.angle.degrees}`);
				p1.setCartesian(-100,-100);
				console.assert((p1.angle.degrees === -135), `Angle not equal to -135: ${p1.angle.degrees}`);

			console.groupEnd();

		</script>
		 -->

	</main>

</body>
</html>