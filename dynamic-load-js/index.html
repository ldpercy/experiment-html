<!doctype html>
<html lang="en">
<head>
	<title>Dynamic Load JS</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- core items -->
	<link rel="stylesheet" href="../style/default.css">
	<script defer src="../util/util.js"></script>
	<script defer src="dynamic-load.js"></script>

	<!--- changeSrc doesn't work, no events are triggered --->
	<script
		defer
		id="changeSrc"
		onload="log('changeSrc: onload');"
		onreadystatechange="log('changeSrc: onreadystatechange');"
		>
	</script>

	<!-- replaceScript -->
	<script
		defer
		id="repscr-123"
		onload="log('replaceScript: onload');"
		onreadystatechange="log('replaceScript: onreadystatechange');"
		>
	</script>

</head>
<body
	onload="bodyOnload();"
	onreadystatechange="log('body: onreadystatechange');"
	>

	<h1><a href="index.html">Dynamic Load JS</a></h1>

	<h2>Load page with folder:</h2>
	<p>
		<a href="index.html">index.html</a>
		<a href="index.html?folder=abc">index.html?folder=abc</a>
		<a href="index.html?folder=def">index.html?folder=def</a>
	</p>

	<h2>Replace script - local callback</h2>
	<p>
		<button onclick="replaceScript('repscr-123', '', ()=>(scriptOnload('empty')) )">
			src attribute ''
		</button>
		<button onclick="replaceScript('repscr-123', 'script/abc.js', () => (scriptOnload('abc')))">
			abc/script.js
		</button>
		<button onclick="replaceScript('repscr-123', 'script/def.js', () => (scriptOnload('def')))">
			def/script.js
		</button>
	</p>
	<h2>Replace script - remote callback</h2>
	<p>
		<button onclick="replaceScript('repscr-123', '', ()=>(scriptAnnounce('empty')) )">
			src attribute ''
		</button>
		<button onclick="replaceScript('repscr-123', 'script/abc.js', ()=>(scriptAnnounce('abc')) )">
			abc/script.js
		</button>
		<button onclick="replaceScript('repscr-123', 'script/def.js', ()=>(scriptAnnounce('def')) )">
			def/script.js
		</button>
	</p>

	<h2>Append script:</h2>
	<p>
		<button onclick="appendScript('', null)">
			src attribute ''
		</button>
		<button onclick="appendScript('script/abc.js', scriptOnload('abc'))">
			abc/script.js
		</button>
		<button onclick="appendScript('script/def.js', scriptOnload('def'))">
			def/script.js
		</button>
	</p>

	<h2>Change src:</h2>
	<p>
		<button onclick="changeSrc('script/placeholder.js', null)">script/placeholder.js</button>
		<button onclick="changeSrc('script/abc.js', null)">abc/script.js</button>
		<button onclick="changeSrc('script/def.js', null)">def/script.js</button>
	</p>

	<h2>Log:</h2>
	<pre class="log" id="prelog"></pre>

</body>
</html>